{{ define "main" }}

{{/* minimize js if production; adapted from https://github.com/gohugoio/hugo/issues/9132 */}}
{{ $params := (dict "is_production" hugo.IsProduction ) }}
{{ $sourceMap := cond hugo.IsProduction "" "inline" }}
{{ $buildOptions := dict "sourceMap" $sourceMap "minify" hugo.IsProduction "target" "es2018" "params" $params }}
{{ $js := resources.Get "js/timetree.js" | js.Build $buildOptions | fingerprint }}

<div id="timetree">
</div>

<aside class="initial">
  <a class="close" href="#">X</a>
  {{/* introduction content */}}
  <article>
    <header>
      <h1>{{ .Params.Title }}</h1>
    </header>
    <div>{{- .Content -}}</div>
  </article>

  <div id="panel">
    <article/>
  </div>
</aside>

<data class="leaf-data" value='{{ partial "leaf_data.json" . }}'></data>

<script src="{{ $js.RelPermalink }}" integrity="{{ $js.Data.Integrity }}" defer></script>
{{ end }} {{/* end main */}}